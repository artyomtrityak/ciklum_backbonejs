define(["modules/ciklumers/list_view","modules/navigation","modules/search/view","modules/details/view","modules/new_user"],function(e,t,n,r,i){return Backbone.Router.extend({routes:{"":"filter_role","role/:role":"filter_role","project/:project":"filter_project","skill/:skill":"filter_skill","*url":"filter_unknown"},initialize:function(){this.ciklumers=new e,this.navigation=new t,this.search=new n,this.details=new r,this.new_user=new i,this.bind()},bind:function(){this.search.on("search",this.filter_search,this),this.ciklumers.on("show_details",this.show_details,this),this.new_user.on("add_new",this.show_new_details,this),this.new_user.on("add_new_ciklumer",this.add_new_ciklumer,this)},filter_role:function(e){e||(e="All"),this.ciklumers.reset(),this.ciklumers.get_next_page({role:e}),this.navigation.activate(e)},filter_search:function(e){this.ciklumers.reset(),this.ciklumers.get_next_page({search:e})},filter_project:function(e){this.search.make_search(e)},filter_skill:function(e){this.search.make_search(e)},filter_unknown:function(){this.navigate("",{trigger:!0})},show_details:function(e){this.details.render(e)},show_new_details:function(e){this.details.render_edit(e)},add_new_ciklumer:function(e){this.ciklumers.add_user(e)}})})